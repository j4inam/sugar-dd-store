generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("MONGO_DB_URL")
}

model Product {
    id                   String   @id @default(auto()) @map("_id") @db.ObjectId
    title                String
    price                Float
    quantity             Float    @default(1.0)
    quantityUnit         String
    quantityEditable     Boolean
    quantityUnitVariants String[]
    imageURL             String
    description          String?
    productVariants      String[]
    sizeVariants         String[]
    createdAt            DateTime @default(now())
    orders                Order[]
}

enum OrderStatus {
    CANCELLED
    SUBMITTED
    CONFIRMED
    BAKING
    READY
    COMPLETED
}

model Order {
    id                     String      @id @default(auto()) @map("_id") @db.ObjectId
    userId                 String
    userFirstName          String
    userLastName           String
    userEmail              String
    userMobile             String
    product                Product     @relation(fields: [productId], references: [id])
    productId              String      @db.ObjectId
    quantity               Float
    quantityUnit           String
    instructions           String
    selectedProductVariant String
    selectedSize           String
    createdAt              DateTime    @default(now())
    updatedAt              DateTime    @updatedAt
    status                 OrderStatus
    themeDescription       String
    requestedDeliveryDate  DateTime
    confirmedDeliveryDate  DateTime?
}
